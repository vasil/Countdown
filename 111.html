<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Clock</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: black;
        }
        #clock {
            position: relative;
            width: 300px;
            height: 300px;
            border: 5px solid white;
            border-radius: 50%;
            background-color: white;
            background-size: cover;
            background-position: center;
            overflow: hidden;
        }
        .hand {
            position: absolute;
            width: 50%;
            height: 2px;
            background: white;
            top: 50%;
            transform-origin: 100%;
            transform: rotate(90deg);
            transition: all 0.1s linear;
        }
        #second-hand {
            background: red;
            height: 1px;
        }
        #minute-hand {
            background: white;
        }
        #hour-hand {
            background: white;
            height: 3px;
        }
        .segment {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.2);
            clip-path: polygon(50% 50%, 100% 0, 100% 100%, 50% 50%);
            z-index: 1;
            transform-origin: 50% 50%;
        }
        .gray-trail {
            background-color: rgba(128, 128, 128, 0.4);
        }
        #notification {
            position: absolute;
            font-family: monospace;
            color: green;
            font-size: 2rem;
            width: 100%;
            top: 10%;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>

<div id="clock">
    <div id="hour-hand" class="hand"></div>
    <div id="minute-hand" class="hand"></div>
    <div id="second-hand" class="hand"></div>
    <div id="segment-1" class="segment"></div>
    <div id="segment-2" class="segment"></div>
    <div id="segment-3" class="segment"></div>
    <div id="segment-4" class="segment"></div>
    <div id="notification">Random String Display</div>
</div>

<audio id="alert-sound" src="notification.mp3"></audio>

<script>
    const clock = document.getElementById('clock');
    const secondHand = document.getElementById('second-hand');
    const minuteHand = document.getElementById('minute-hand');
    const hourHand = document.getElementById('hour-hand');
    const segments = [
        document.getElementById('segment-1'),
        document.getElementById('segment-2'),
        document.getElementById('segment-3'),
        document.getElementById('segment-4')
    ];
    const notification = document.getElementById('notification');
    const alertSound = document.getElementById('alert-sound');

    let startTime, timerInterval;

    // Update clock hands and segment overlays
    function updateClock() {
        const now = new Date(Date.now() - startTime);
        const seconds = now.getSeconds();
        const minutes = now.getMinutes();
        const hours = now.getHours();

        secondHand.style.transform = `rotate(${(seconds / 60) * 360}deg)`;
        minuteHand.style.transform = `rotate(${(minutes / 60) * 360}deg)`;
        hourHand.style.transform = `rotate(${(hours % 12) / 12 * 360 + (minutes / 60) * 30}deg)`;

        // Update segment overlays based on the quarter of the minute
        updateSegments(minutes);

        if (seconds >= 40 && seconds < 50) {
            notification.style.display = 'block';
        } else {
            notification.style.display = 'none';
        }

        if (minutes === 10 && seconds === 0) {
            playAlertSound();
        }
    }

    function updateSegments(minutes) {
        const rotation = (minutes % 15) / 15 * 360; // 0-15 minutes = one full rotation
        const grayTrailRotation = minutes / 15 * 360;
        
        // Handle phase 1 (first 10 minutes) solid overlay
        if (minutes < 10) {
            segments.forEach((segment, index) => {
                if (index < Math.floor(minutes / 2.5)) {
                    segment.classList.add('gray-trail');
                }
                segment.style.transform = `rotate(${index * 90}deg)`;
            });
        } else if (minutes < 15) {
            segments.forEach((segment, index) => {
                segment.className = 'segment'; // Reset
                if (index < Math.floor(minutes / 2.5)) {
                    segment.classList.add('gray-trail');
                }
                segment.style.transform = `rotate(${index * 90}deg)`;
            });
        }
    }

    function playAlertSound() {
        alertSound.play().catch(() => {
            console.log("Sound file missing or cannot be played.");
        });
    }

    // Start the clock when spacebar is pressed
    document.addEventListener('keydown', function(event) {
        if (event.code === 'Space' && !timerInterval) {
            startTime = Date.now();
            timerInterval = setInterval(updateClock, 1000);
        }
    });
</script>

</body>
</html>
